<html>
  <head>
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      google.charts.load("current", { packages: ["corechart"] });
      google.charts.setOnLoadCallback(drawChart);

      async function drawChart() {
        fetch(`http://localhost:8888/faaso/historico/?names=${document.getElementById("nombres").value}`)
          .then((response) => response.json())
          .then((json) => {
            var data = [json[0]]
            data.push(...json.slice(1).map((item) => item.map((value) => parseInt(value))));
            console.log(data)
            data = google.visualization.arrayToDataTable(data)
            var options = {
              title: "Popularidad de los nombres",
              curveType: "function",
              legend: { position: "bottom" },
            };

            var chart = new google.visualization.LineChart(
              document.getElementById("curve_chart")
            );

            chart.draw(data, options);
          });
      }
    </script>
  </head>
  <body>
    <input id="nombres"></input>
    <input type="submit" onClick="drawChart()"></input>
    <div id="curve_chart" style="width: 900px; height: 500px"></div>
  </body>
</html>
