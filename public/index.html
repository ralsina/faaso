<!DOCTYPE html>

<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.colors.min.css" />
  <script src="https://unpkg.com/htmx.org@2.0.0"></script>
  <script src="https://unpkg.com/htmx-ext-sse@2.2.0/sse.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kode+Mono:wght@400..700&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FaaSO Admin Panel</title>
</head>
<body style="font-family:Kode mono;">
<main class="container">
  <section>
    <nav>
      <ul>
      <li><strong style="font-size: 200%;">Your Funko Collection</strong></li>
      </ul>
      <ul>
      <li><span role="button" id="update-funkos" hx-trigger="load, click, every 60s"
        hx-get="funkos/?format=html" hx-target="#funko-list">
        Refresh
      </span>
      </ul>
    </nav>
    <span id="message"></span>
    <table hx-target="#message" class="striped">
      <thead>
        <tr>
          <th>Name</th>
          <th>Instances</th>
          <th style="text-align:right;padding-right:0;">Actions</th>
        </tr>
      </thead>
      <tbody id="funko-list">
      </tbody>
    </table>
    <div id="terminal" style="resize: vertical; overflow: auto;"></div>
  </section>
  <script>
    update_funkos = function () {
      document.getElementById("update-funkos").click()
    }
  </script>
  <section>
    <nav>
    <ul>
    <li><strong style="font-size: 200%;">Your Secrets</strong>
    </ul>
    <ul>
      <li><span role="button"
            hx-get="secrets/-/-/?format=html"
            hx-target="#add-secret"
            hx-on:htmx:before-request="show_secret();">Add
          </span>
      <li><span role="button" id="update-secrets" hx-trigger="load, click, every 60s"
        hx-get="secrets/?format=html" hx-target="#secret-list">
        Refresh
      </span>
    </ul>
    </nav>
    <span id="message"></span>
    <table hx-target="#message">
      <thead>
        <tr>
          <th>Funko</th>
          <th>Name</th>
          <th style="text-align:right;padding-right:0;">Actions</th>
        </tr>
      </thead>
      <tbody id="secret-list">
      </tbody>
      <dialog id="add-secret">
      </dialog>
      <script>
        update_secrets = function() {
          document.getElementById("update-secrets").click()
        }
        add_secret = function() {
          clean_secret()
          document.getElementById('add-secret').show()
        }
        show_secret = function() {
          document.getElementById('add-secret').show()
        }
        clean_secret = function() {
          document.getElementById('new-secret-funko').value=""
          document.getElementById('new-secret-name').value=""
          document.getElementById('new-secret-password').value=""
        }
        hide_secret = function() {
          document.getElementById('add-secret').close();
          update_secrets();
        }
      </script>
    </section>
  </main>
</body>
